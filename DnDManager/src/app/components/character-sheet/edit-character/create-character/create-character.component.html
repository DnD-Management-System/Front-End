<mat-stepper [linear]="true" #stepper>

  <mat-step [stepControl]="basicInfo">
    <form [formGroup]="basicInfo">
      <ng-template matStepLabel>Basic Info</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Character Name</mat-label>
        <input matInput placeholder="Name" formControlName="characterName" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Character Name</mat-label>
        <input matInput placeholder="Name" formControlName="playerName" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Character Race</mat-label>
        <input matInput placeholder="Human" formControlName="race" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Class</mat-label>
        <input matInput placeholder="Class Name" formControlName="class" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Level</mat-label>
        <input matInput type="number" formControlName="level" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Alignment</mat-label>
        <input matInput placeholder="LG" formControlName="alignment" required>
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="gameplayVitals">
    <form [formGroup]="gameplayVitals">
      <ng-template matStepLabel>Gameplay Vitals</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>HP</mat-label>
        <input matInput type="number" formControlName="hp" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>AC</mat-label>
        <input matInput type="number" formControlName="ac" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Speed</mat-label>
        <input matInput placeholder="xx ft" formControlName="speed" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Hit Dice</mat-label>
        <input matInput type="number" formControlName="hitDice" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Proficiency Bonus</mat-label>
        <input matInput type="number" formControlName="proficiencyBonus" required>
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="abilities">
    <form [formGroup]="abilities">
      <ng-template matStepLabel>Abilities Scores and Skills</ng-template>
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Strength*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Strength Score:</mat-label>
            <input matInput type="number" formControlName="strength" required>
          </mat-form-field>
          <h4>Proficiencies</h4>
          <p><mat-checkbox formControlName="athletics">Athletics</mat-checkbox></p>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Dexterity*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Dexterity Score:</mat-label>
            <input matInput type="number" formControlName="dexterity" required>
          </mat-form-field>
          <h4>Proficiencies</h4>
          <p><mat-checkbox formControlName="acrobatics">Acrobatics</mat-checkbox></p>
          <p><mat-checkbox formControlName="sleight">Sleight of Hand</mat-checkbox></p>
          <p><mat-checkbox formControlName="stealth">Stealth</mat-checkbox></p>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Constitution*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Constitution Score:</mat-label>
            <input matInput type="number" formControlName="constitution" required>
          </mat-form-field>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Intelligence*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Intelligence Score:</mat-label>
            <input matInput type="number" formControlName="intelligence" required>
          </mat-form-field>
          <h4>Proficiencies</h4>
          <p><mat-checkbox formControlName="arcana">Arcana</mat-checkbox></p>
          <p><mat-checkbox formControlName="history">History</mat-checkbox></p>
          <p><mat-checkbox formControlName="investigation">Investigation</mat-checkbox></p>
          <p><mat-checkbox formControlName="nature">Nature</mat-checkbox></p>
          <p><mat-checkbox formControlName="religion">Religion</mat-checkbox></p>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Wisdom*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Wisdom Score:</mat-label>
            <input matInput type="number" formControlName="wisdom" required>
          </mat-form-field>
          <h4>Proficiencies</h4>
          <p><mat-checkbox formControlName="animal">Animal Handling</mat-checkbox></p>
          <p><mat-checkbox formControlName="insight">Insight</mat-checkbox></p>
          <p><mat-checkbox formControlName="medicine">Medicine</mat-checkbox></p>
          <p><mat-checkbox formControlName="perception">Perception</mat-checkbox></p>
          <p><mat-checkbox formControlName="survival">Survival</mat-checkbox></p>

        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title><strong>Charisma*</strong></mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field appearance="fill">
            <mat-label>Charisma Score</mat-label>
            <input matInput type="number" formControlName="charisma" required>
          </mat-form-field>
          <h4>Proficiencies</h4>
          <p><mat-checkbox formControlName="deception">Deception</mat-checkbox></p>
          <p><mat-checkbox formControlName="intimidation">Intimidation</mat-checkbox></p>
          <p><mat-checkbox formControlName="performance">Performance</mat-checkbox></p>
          <p><mat-checkbox formControlName="persuasion">Persuasion</mat-checkbox></p>
        </mat-expansion-panel>
      </mat-accordion>
    </form>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext>Next</button>
    </div>
  </mat-step>

  <mat-step [stepControl]="actionsGroup">
    <form [formGroup]="actionsGroup">
      <ng-template matStepLabel>Actions</ng-template>
      <table mat-table [dataSource]="actionDataSource">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Action Name</th>
          <td mat-cell *matCellDef="let element">{{element.name}}</td>
        </ng-container>
        <ng-container matColumnDef="bonus">
          <th mat-header-cell *matHeaderCellDef>Attack Bonus</th>
          <td mat-cell *matCellDef="let element">{{element.attackBonus}}</td>
        </ng-container>
        <ng-container matColumnDef="damage">
          <th mat-header-cell *matHeaderCellDef>Damage</th>
          <td mat-cell *matCellDef="let element">{{element.damage}}</td>
        </ng-container>
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef>Damage Type</th>
          <td mat-cell *matCellDef="let element">{{element.type}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="actionColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: actionColumns;"></tr>
      </table>
      <mat-grid-list cols="5" gutterSize="20px">
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Name" formControlName="actionName" [(ngModel)]="actionName">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Attack Bonus" formControlName="actionBonus" [(ngModel)]="actionBonus">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Damage" formControlName="actionDamage" [(ngModel)]="actionDamage">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Damage Type" formControlName="actionType" [(ngModel)]="actionType">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <button mat-raised-button (click)="addAction()">Add</button>
        </mat-grid-tile>
      </mat-grid-list>
    </form>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext>Next</button>
    </div>
  </mat-step>

  <mat-step [stepControl]="traits">
    <div class="traits_container">
      <form [formGroup]="traits">
        <ng-template matStepLabel>Traits (1 of 2)</ng-template>
        <table mat-table [dataSource]="personalityDataSource">
          <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef>Personality Traits</th>
            <td mat-cell *matCellDef="let element">{{element.value}}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="traitColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: traitColumns;"></tr>
        </table>
        <mat-grid-list cols="2">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <input matInput placeholder="Value" formControlName="personality" [(ngModel)]="personality">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile>
            <button mat-raised-button (click)="addPersonality()">Add</button>
          </mat-grid-tile>
        </mat-grid-list>
      </form>
      <form [formGroup]="traits">
        <table mat-table [dataSource]="bondDataSource">
          <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef>Bonds</th>
            <td mat-cell *matCellDef="let element">{{element.value}}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="traitColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: traitColumns;"></tr>
        </table>
        <mat-grid-list cols="2">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <input matInput placeholder="Value" formControlName="bond" [(ngModel)]="bond">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile>
            <button mat-raised-button (click)="addBond()">Add</button>
          </mat-grid-tile>
        </mat-grid-list>
      </form>
    </div>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext>Next</button>
    </div>
  </mat-step>
  <mat-step [stepControl]="traits">
    <div class="traits_container">
      <form [formGroup]="traits">
        <ng-template matStepLabel>Traits (2 of 2)</ng-template>

        <table mat-table [dataSource]="idealDataSource">
          <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef>Ideals</th>
            <td mat-cell *matCellDef="let element">{{element.value}}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="traitColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: traitColumns;"></tr>
        </table>
        <mat-grid-list cols="2">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <input matInput placeholder="Value" formControlName="ideal" [(ngModel)]="ideal">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile>
            <button mat-raised-button (click)="addIdeal()">Add</button>
          </mat-grid-tile>
        </mat-grid-list>
      </form>
      <form [formGroup]="traits">
        <table mat-table [dataSource]="flawDataSource">
          <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef>Flaws</th>
            <td mat-cell *matCellDef="let element">{{element.value}}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="traitColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: traitColumns;"></tr>
        </table>
        <mat-grid-list cols="2">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <input matInput placeholder="Value" formControlName="flaw" [(ngModel)]="flaw">
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile>
            <button mat-raised-button (click)="addFlaw()">Add</button>
          </mat-grid-tile>
        </mat-grid-list>
      </form>
    </div>

    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext>Next</button>
    </div>
  </mat-step>
  <mat-step [stepControl]="proficienciesGroup">
    <form [formGroup]="proficienciesGroup">
      <ng-template matStepLabel>Proficiencies</ng-template>
      <table mat-table [dataSource]="proficiencyDataSource">
        <ng-container matColumnDef="value">
          <th mat-header-cell *matHeaderCellDef>Proficiencies</th>
          <td mat-cell *matCellDef="let element">{{element.name}}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="traitColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: traitColumns;"></tr>
      </table>
      <mat-grid-list cols="2">
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Value" formControlName="proficiency" [(ngModel)]="proficiency">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <button mat-raised-button (click)="addProficiency()">Add</button>
        </mat-grid-tile>
      </mat-grid-list>
    </form>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext>Next</button>
    </div>
  </mat-step>
  <mat-step [stepControl]="featuresGroup">
    <form [formGroup]="featuresGroup">
      <ng-template matStepLabel>Features</ng-template>
      <table mat-table [dataSource]="featureDataSource">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">{{element.name}}</td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let element">{{element.description}}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="featureColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: featureColumns;"></tr>
      </table>
      <mat-grid-list cols="3">
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <input matInput placeholder="Name" formControlName="featureName" [(ngModel)]="featureName">
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field appearance="fill">
            <textarea matInput placeholder="Description" formControlName="featureDescription" [(ngModel)]="featureDescription"></textarea>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <button mat-raised-button (click)="addFeature()">Add</button>
        </mat-grid-tile>
      </mat-grid-list>
    </form>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button mat-dialog-close (click)="createCharacter()">Submit</button>
    </div>
  </mat-step>
</mat-stepper>
